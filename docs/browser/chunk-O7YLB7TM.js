import{a as q}from"./chunk-UGEGDRMQ.js";import{a as M,d as Q,j as W}from"./chunk-R4HYYWC6.js";import"./chunk-7FDKDFGO.js";import{l as Y}from"./chunk-RINRWVMW.js";import{a as z,c as G,d as A,e as R,g as O,i as U,j as B,k as $,p as K}from"./chunk-S5G6C3XF.js";import{Aa as y,Ba as g,Ca as E,D as h,E as x,Ia as w,J as f,Ja as T,K as _,U as I,X as l,Y as u,Ya as D,Za as F,bb as L,fa as b,ha as d,ma as i,na as r,nb as j,oa as s,ob as N,qb as k,ra as P,rb as V,ta as m,ua as p,y as v,za as c}from"./chunk-QPUKSS23.js";var et=()=>["/public/cart/checkout"],nt=n=>["/productdetails",n],ot=()=>["/public/products"];function it(n,C){n&1&&(i(0,"div",3),s(1,"app-loading"),r())}function rt(n,C){if(n&1){let t=P();i(0,"div",31)(1,"div",32)(2,"div",33)(3,"div",34),s(4,"img",35),r()(),i(5,"div",36)(6,"div",37)(7,"a",38),c(8),r(),i(9,"h4",39),c(10,"Rate:"),i(11,"span",40),s(12,"i",41),c(13),r()(),i(14,"h4"),c(15,"Price:"),i(16,"span",40),c(17),r()(),i(18,"p",42),c(19),i(20,"span"),c(21,"Available"),r()()()(),i(22,"div",43)(23,"div")(24,"div",44)(25,"button",45),m("click",function(){let o=f(t).$implicit,a=p(3);return _(a.updateItemCount(o.product._id,o.count-1))}),c(26,"-"),r(),i(27,"span",46),c(28),r(),i(29,"button",47),m("click",function(){let o=f(t).$implicit,a=p(3);return _(a.updateItemCount(o.product._id,o.count+1))}),c(30,"+"),r()()()(),i(31,"div",43)(32,"div",48)(33,"p",49),c(34,"Total Price"),r(),i(35,"span",50),c(36),r()()(),i(37,"div",51)(38,"div",52)(39,"div",53),m("click",function(){let o=f(t).$implicit,a=p(3);return _(a.removeItem(o.product._id))}),s(40,"i",54),r()()()()()}if(n&2){let t=C.$implicit,e=p(3);l(4),d("src",t==null||t.product==null?null:t.product.imageCover,I)("alt",t==null||t.product==null||t.product.category==null?null:t.product.category.name),l(3),d("routerLink",T(10,nt,t==null||t.product==null?null:t.product._id)),l(),y(t==null||t.product==null?null:t.product.title),l(5),g(" ",t==null||t.product==null?null:t.product.ratingsAverage,""),l(4),g("EGP ",t.price,""),l(2),E("",t==null||t.product==null||t.product.category==null?null:t.product.category.name," | ",t==null||t.product==null||t.product.brand==null?null:t.product.brand.name," | "),l(9),y(t.count),l(8),g("EGP ",e.getPriceForOneProduct(t.price,t.count),"")}}function ct(n,C){if(n&1){let t=P();i(0,"div",6),b(1,rt,41,12,"div",26),i(2,"div",27)(3,"div",28)(4,"button",29),m("click",function(){f(t);let o=p(2);return _(o.onClearCart())}),s(5,"i",30),c(6," Clear All Products"),r()()()()}if(n&2){let t=p(2);l(),d("ngForOf",t.cartDetails.products)}}function at(n,C){n&1&&(i(0,"div",55)(1,"div",56)(2,"p",57),c(3,"There are not products yet."),r(),i(4,"button",58),c(5,"Add your first product"),r()()()),n&2&&(l(4),d("routerLink",w(1,ot)))}function lt(n,C){if(n&1){let t=P();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"div")(9,"button",12),m("click",function(){f(t);let o=p();return _(o.goBack())}),s(10,"i",13),r()(),i(11,"div",14)(12,"h3",15),c(13,"Shop Cart "),s(14,"i",16),r()()()(),i(15,"div",17)(16,"div",18)(17,"div",19)(18,"p",20),c(19,"Total Price: "),i(20,"span",21),c(21),r()()(),i(22,"div",22)(23,"button",23),c(24,"Check Out"),r()()()()()()(),b(25,ct,7,1,"div",24)(26,at,6,2,"div",25),r()()()}if(n&2){let t=p();l(21),g("EGP ",t.cartDetails.totalCartPrice||0,""),l(2),d("routerLink",w(4,et)),l(2),d("ngIf",(t.cartDetails==null?null:t.cartDetails.products)&&t.cartDetails.products.length>0),l(),d("ngIf",!t.cartDetails.products||t.cartDetails.products.length===0)}}var H=(()=>{class n{constructor(t,e,o){this._CartService=t,this._ToastrService=e,this._GoBackService=o,this.cartDetails={products:[],totalCartPrice:0},this.isLoading=!0}ngOnInit(){typeof window<"u"&&this.getLoggedUserData()}getLoggedUserData(){this._CartService.getLoggedUserData().subscribe({next:t=>{this.cartDetails=t.data,this.isLoading=!1},error:t=>{this.isLoading=!1}})}removeItem(t){this._CartService.removeCartItem(t).subscribe({next:e=>{this.cartDetails=e.data,this._CartService.numOfCartItem.next(e.numOfCartItems)},error:e=>{console.log(e)}})}updateItemCount(t,e){if(e===0){let o=this._ToastrService.info("Deleting your product...","",{disableTimeOut:!0});this.removeItem(t),this._ToastrService.clear(o.toastId),this._ToastrService.success("Product Removed successfully")}else{let o=this._ToastrService.info("Waitng...","",{disableTimeOut:!0});this._CartService.updateItemCount(t,e).subscribe({next:a=>{this.cartDetails=a.data,this._ToastrService.clear(o.toastId),this._ToastrService.success(`You have ${e} pieces now`)},error:a=>{console.log(a)}})}}onClearCart(){this._CartService.clearCart().subscribe({next:t=>{t.message==="success"&&(this.cartDetails={products:[],totalCartPrice:0},this._CartService.numOfCartItem.next(0))},error:t=>{console.log(t)}})}getPriceForOneProduct(t,e){return t*e}goBack(){this._GoBackService.goBack()}static{this.\u0275fac=function(e){return new(e||n)(u(M),u(Y),u(q))}}static{this.\u0275cmp=h({type:n,selectors:[["app-cart"]],decls:3,vars:2,consts:[[1,"py-5"],["class","col-12 text-center py-3",4,"ngIf"],["class","container rounded-4",4,"ngIf"],[1,"col-12","text-center","py-3"],[1,"container","rounded-4"],[1,"cart","my-3","p-3"],[1,"row"],[1,"col-12"],[1,"head"],[1,"row","flex-column","flex-md-row"],[1,"col-12","col-md-6","mb-3","mb-md-0"],[1,"d-flex","align-items-center"],[1,"arrow-button","d-flex","justify-content-center","align-items-center",3,"click"],[1,"fa-solid","fa-arrow-left","font-md"],[1,"text","d-flex","align-items-center"],[1,"my-1","mx-2","font-bold","font-lg","second-color"],[1,"fa-brands","fa-opencart","main-color"],[1,"col-12","col-md-6"],[1,"d-flex","flex-column","align-items-start","align-items-md-end","justify-content-center"],[1,"total-price","d-flex","mb-2","mb-md-0"],[1,"mb-2","mb-md-0"],[1,"main-color"],[1,"check-out","w-100","w-md-auto","d-flex","justify-content-end"],[1,"w-25","mt-3",3,"routerLink"],["class","row",4,"ngIf"],["class","d-flex justify-content-center align-items-center",4,"ngIf"],["class","col-12 py-3 after-product position-relative",4,"ngFor","ngForOf"],[1,"col-12","d-flex","justify-content-center","align-items-center"],[1,"my-3"],[1,"btn","btn-danger","remove-all-product",3,"click"],[1,"fa-solid","fa-trash-can","me-2"],[1,"col-12","py-3","after-product","position-relative"],[1,"row","align-items-center"],[1,"col-4","col-md-2","mb-3","mb-md-0"],[1,"image","overflow-hidden","w-100"],[1,"w-100","rounded-5","img-border",3,"src","alt"],[1,"col-8","col-md-4","mb-3","mb-md-0"],[1,"info"],[1,"font-bold","font-md","second-color",3,"routerLink"],[1,"mt-2"],[1,"ms-2"],[1,"fa-solid","fa-star","rating-color"],[1,"mb-0"],[1,"col-6","col-md-2","mt-3","mt-md-0"],[1,"count","font-md","p-1"],[1,"btn-plus",3,"click"],[1,"mx-3"],[1,"btn-minus",3,"click"],[1,"product-price","font-sm","d-flex","flex-column","justify-content-center","align-items-start","align-items-md-center"],[1,"p-0","m-0"],[1,"font-super-sm","main-color"],[1,"col-12","col-md-2","mt-3","mt-md-0","text-end","text-md-center"],[1,"remove-product"],[1,"icon-remove","d-flex","justify-content-center","align-items-center","cursor-pointer","ms-auto","me-md-auto",3,"click"],[1,"fa-solid","fa-xmark"],[1,"d-flex","justify-content-center","align-items-center"],[1,"my-5","text-center"],[1,"mb-3"],[1,"btn-add-product-fav",3,"routerLink"]],template:function(e,o){e&1&&(i(0,"section",0),b(1,it,2,0,"div",1)(2,lt,27,5,"div",2),r()),e&2&&(l(),d("ngIf",o.isLoading),l(),d("ngIf",!o.isLoading))},dependencies:[D,F,N,Q],styles:['.container[_ngcontent-%COMP%]{background-color:#f0f3f2;margin:20px auto!important}@media (min-width: 768px){.container[_ngcontent-%COMP%]{margin:100px auto 250px!important}}.arrow-button[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff;border:none;border-radius:50%;width:40px;height:40px;transition:all .4s}.arrow-button[_ngcontent-%COMP%]:hover{transform:translate(-10px) scale(1.1)}.main-color[_ngcontent-%COMP%]{color:var(--main-color)}.second-color[_ngcontent-%COMP%]{color:var(--second-color)}.img-border[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.0352941176)}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{transition:all .4s;display:block;font-size:14px}@media (min-width: 768px){.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:16px}}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--main-color)}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:300;font-size:14px}@media (min-width: 768px){.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--main-color);font-weight:500}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:.5;font-size:12px}@media (min-width: 768px){.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}.cart[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1!important;color:#22c55e}.btn-add-product-fav[_ngcontent-%COMP%]{border:none;background-color:var(--main-color);border-radius:20px;padding:8px 15px;color:#fff;transition:all .3s}.btn-add-product-fav[_ngcontent-%COMP%]:hover{background-color:#02ade3}.remove-all-product[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{animation:tilt .5s infinite ease-in-out}.after-product[_ngcontent-%COMP%]:after{content:"";width:90%;height:2px;background-color:#e5e7eb;position:absolute;top:100%;left:50%;transform:translate(-50%)}.cart[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{border:1px solid #d6d7da;border-radius:15px;width:fit-content}.btn-plus[_ngcontent-%COMP%], .btn-minus[_ngcontent-%COMP%]{border:none;background-color:transparent;transition:all .3s;padding:0 10px}.btn-plus[_ngcontent-%COMP%]:hover, .btn-minus[_ngcontent-%COMP%]:hover{color:var(--main-color)}.remove-product[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%]{width:30px;height:30px;border:2px solid rgba(220,38,38,0);border-radius:50%;transition:all .4s}.remove-product[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;transition:all .4s;color:#6b7280cc}.remove-product[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%]:hover{border-color:#dc2626}.remove-product[_ngcontent-%COMP%]   .icon-remove[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:rotate(180deg);color:#dc2626}.check-out[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border:1px solid #d6d7da;border-radius:10px;background-color:#fff;color:var(--main-color);padding:10px 20px;transition:all .4s}.check-out[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);border-color:var(--main-color);color:#fff}.product-price[_ngcontent-%COMP%]{font-size:14px}@media (min-width: 768px){.product-price[_ngcontent-%COMP%]{font-size:16px}}.rating-color[_ngcontent-%COMP%]{color:#ffc107}']})}}return n})();var J=(()=>{class n{constructor(t,e){this._CartService=t,this._Router=e,this.shippingAddressForm=new R({details:new O(null),phone:new O(null),city:new O(null)}),this.cartId="",this.totalPrice=0}ngOnInit(){this.getLoggedUserData()}getLoggedUserData(){this._CartService.getLoggedUserData().subscribe({next:t=>{this.cartId=t.data._id,this.totalPrice=t.data.totalCartPrice},error:t=>{console.log(t)}})}handlePayOnline(t,e){let o=t.value;this._CartService.onlinePayment(o,e).subscribe({next:a=>{a.session?.url&&this.navigateToPage(a.session.url)},error:a=>{console.log(a)}})}handleCash(t,e){let o=t.value;this._CartService.cashPayment(o,e).subscribe({next:a=>{a.status==="success"&&(this._Router.navigate(["/allorders"]),this._CartService.numOfCartItem.next(0))},error:a=>{console.log(a)}})}navigateToPage(t){window.location.href=t}static{this.\u0275fac=function(e){return new(e||n)(u(M),u(j))}}static{this.\u0275cmp=h({type:n,selectors:[["app-checkout"]],decls:22,vars:2,consts:[[1,"container","payment","py-5","my-5"],[1,"w-50","mx-auto","bg-main-light","p-5","rounded-2"],[1,"font-lg","font-bold","second-color","mx-auto","py-2","px-5"],[1,"form-pay","py-5","px-4","mt-5"],[1,"font-bold","second-color"],[1,"mt-4","px-3",3,"formGroup"],[1,"font-bold"],[1,"ms-2","main-color"],["formControlName","city","type","text","placeholder","Enter Your City Name",1,"form-control","my-2"],["formControlName","phone","type","tel","placeholder","Enter Your Phone",1,"form-control","my-2"],["formControlName","details","cols","3","rows","3","type","text","placeholder","Details",1,"form-control","my-2"],[1,"d-flex","justify-content-between"],[1,"btn-payment-cash","mt-2",3,"click"],["src","../../../../../assets/images/cash1-DfoK3QaK.png","alt","cash",1,"img-pay"],[1,"btn-payment-online","mt-2",3,"click"],["src","../../../../../assets/images/online1-CDuK_NPr.png","alt","online",1,"img-pay"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),c(3,"Check Out"),r(),i(4,"div",3)(5,"h3",4),c(6,"Cart totals"),r(),i(7,"form",5)(8,"h4",6),c(9,"SubTotal :"),i(10,"span",7),c(11),r()(),s(12,"input",8)(13,"input",9)(14,"textarea",10),i(15,"div",11)(16,"button",12),m("click",function(){return o.handleCash(o.shippingAddressForm,o.cartId)}),s(17,"img",13),c(18,"Cash Order"),r(),i(19,"button",14),m("click",function(){return o.handlePayOnline(o.shippingAddressForm,o.cartId)}),s(20,"img",15),c(21,"Online Order"),r()()()()()()),e&2&&(l(7),d("formGroup",o.shippingAddressForm),l(4),g("EGP ",o.totalPrice,""))},dependencies:[U,z,G,A,B,$],styles:[".bg-main-light[_ngcontent-%COMP%]{background-color:#f0f3f2!important}.payment[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{width:fit-content;border-top:2px solid var(--main-color);border-bottom:2px solid var(--main-color)}.container.payment[_ngcontent-%COMP%]{width:100%;padding:0 15px}.container.payment[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:90%!important;max-width:600px}@media (max-width: 768px){.container.payment[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%!important;padding:15px!important}.form-pay[_ngcontent-%COMP%]{padding:15px!important}.btn-payment-cash[_ngcontent-%COMP%], .btn-payment-online[_ngcontent-%COMP%]{width:100%!important;margin:5px 0;font-size:16px;padding:10px}.d-flex[_ngcontent-%COMP%]{flex-direction:column}.img-pay[_ngcontent-%COMP%]{width:25px}}.form-pay[_ngcontent-%COMP%]{border:1px solid rgba(71,72,74,.3294117647);border-radius:10px}.form-pay[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px}.form-pay[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px}.btn-payment-cash[_ngcontent-%COMP%], .btn-payment-online[_ngcontent-%COMP%]{width:45%;border:none;padding:8px 16px;font-size:18px;font-weight:600;border-radius:10px}.btn-payment-cash[_ngcontent-%COMP%]{background-color:var(--main-color);color:#fff}.btn-payment-online[_ngcontent-%COMP%]{background-color:#fff;color:#000;transition:all .5s}.btn-payment-online[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.img-pay[_ngcontent-%COMP%]{width:35px}"]})}}return n})();var dt=[{path:"",redirectTo:"cart",pathMatch:"full"},{path:"cart",component:H},{path:"checkout",component:J,title:"Chechout"},{path:"**",component:V}],X=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=x({type:n})}static{this.\u0275inj=v({imports:[k.forChild(dt),k]})}}return n})();var Tt=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=x({type:n})}static{this.\u0275inj=v({imports:[L,X,W,K]})}}return n})();export{Tt as CartModule};
