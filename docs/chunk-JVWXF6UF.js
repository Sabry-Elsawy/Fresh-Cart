import{a as A}from"./chunk-7FDKDFGO.js";import{a as x,b as g,c as y,d as S,e as G,g as v,i as M,j as O,k as D,n as te,p as ne,q as oe}from"./chunk-S5G6C3XF.js";import{Aa as J,Ba as K,D as u,E as U,J as V,Ja as j,K as L,U as Y,X as s,Xa as Q,Y as C,Za as w,bb as W,fa as m,ha as l,ja as q,ma as o,mb as X,na as r,oa as d,ob as $,pb as ee,qb as z,ra as Z,rb as R,ta as f,ua as h,y as T,ya as H,za as a}from"./chunk-QPUKSS23.js";function ue(e,c){if(e&1&&d(0,"input",15),e&2){let n=h();l("value",n.userAddressData[n.userAddressData.length-1].name)}}function fe(e,c){if(e&1&&d(0,"input",15),e&2){let n=h();l("value",n.userAddressData[n.userAddressData.length-1].city)}}function ge(e,c){if(e&1&&d(0,"input",15),e&2){let n=h();l("value",n.userAddressData[n.userAddressData.length-1].phone)}}function he(e,c){if(e&1&&d(0,"textarea",16),e&2){let n=h();l("value",n.userAddressData[n.userAddressData.length-1].details)}}var se=(()=>{class e{constructor(n){this._UserService=n,this.userAddressData=[],this.userAddress=new G({name:new v(null),details:new v(null),phone:new v(null),city:new v(null)})}ngOnInit(){this.getLoggedUserAddress()}getLoggedUserAddress(){this._UserService.getLoggedUserAddress().subscribe({next:n=>{this.userAddressData=n.data},error:n=>{}})}addUserAddress(n){this._UserService.addUserAddress(n.value).subscribe({next:i=>{this.userAddressData=i.data,this.clearInput()},error:i=>{}})}clearInput(){this.userAddress.reset()}static{this.\u0275fac=function(i){return new(i||e)(C(A))}}static{this.\u0275cmp=u({type:e,selectors:[["app-add-address"]],decls:23,vars:5,consts:[[1,"py-5","my-5"],[1,"add-address","box-shadow","p-3","second-color","w-25","mx-auto"],[1,"text-center","font-bold","font-lg"],[3,"ngSubmit","formGroup"],["for","name"],["class","form-control my-1","disabled","",3,"value",4,"ngIf"],["formControlName","name","type","text","id","name","placeholder","Enter your new name",1,"form-control"],["for","city"],["formControlName","city","type","text","id","city","placeholder","Enter your new city",1,"form-control"],["for","phone"],["formControlName","phone","type","tel","id","phone","placeholder","Enter your new phone",1,"form-control"],["for","details"],["class","form-control my-1","cols","3","rows","2","disabled","",3,"value",4,"ngIf"],["formControlName","details","id","details","cols","5","rows","3","placeholder","Enter your new details",1,"form-control"],[1,"add-address-btn","mt-3"],["disabled","",1,"form-control","my-1",3,"value"],["cols","3","rows","2","disabled","",1,"form-control","my-1",3,"value"]],template:function(i,t){i&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),a(3,"Add Address"),r(),o(4,"form",3),f("ngSubmit",function(){return t.addUserAddress(t.userAddress)}),o(5,"label",4),a(6,"Name"),r(),m(7,ue,1,1,"input",5),d(8,"input",6),o(9,"label",7),a(10,"City"),r(),m(11,fe,1,1,"input",5),d(12,"input",8),o(13,"label",9),a(14,"Phone"),r(),m(15,ge,1,1,"input",5),d(16,"input",10),o(17,"label",11),a(18,"Details"),r(),m(19,he,1,1,"textarea",12),d(20,"textarea",13),o(21,"button",14),a(22,"Add Address"),r()()()()),i&2&&(s(4),l("formGroup",t.userAddress),s(3),l("ngIf",t.userAddressData.length&&t.userAddressData[t.userAddressData.length-1].name),s(4),l("ngIf",t.userAddressData.length&&t.userAddressData[t.userAddressData.length-1].city),s(4),l("ngIf",t.userAddressData.length&&t.userAddressData[t.userAddressData.length-1].phone),s(4),l("ngIf",t.userAddressData.length&&t.userAddressData[t.userAddressData.length-1].details))},dependencies:[w,M,x,y,S,O,D],styles:[".add-address[_ngcontent-%COMP%]{width:90%!important;max-width:500px;margin:0 auto}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}label[_ngcontent-%COMP%]{margin-top:10px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:8px;border-radius:4px;border:1px solid #ddd}.add-address-btn[_ngcontent-%COMP%]{width:100%;padding:10px;border:none;border-radius:4px;background-color:var(--main-color);color:#fff;cursor:pointer;margin-top:15px;transition:all .3s}.add-address-btn[_ngcontent-%COMP%]:hover{background-color:#082f49}@media (max-width: 768px){.add-address[_ngcontent-%COMP%]{width:95%!important;padding:15px!important}}"]})}}return e})();var B=e=>({"is-invalid":e});function ve(e,c){if(e&1&&(o(0,"div",14),a(1),r()),e&2){let n=h();s(),J(n.emailError)}}function Pe(e,c){e&1&&(o(0,"div",15),a(1," Current password is required. "),r())}function Ce(e,c){e&1&&(o(0,"div",15),a(1," New password is required. "),r())}function _e(e,c){e&1&&(o(0,"div",15),a(1," Password must be at least 6 characters long. "),r())}function be(e,c){e&1&&(o(0,"div",15),a(1," Please confirm your new password. "),r())}function we(e,c){e&1&&(o(0,"div",15),a(1," Passwords do not match. "),r())}var le=(()=>{class e{constructor(n){this._UserService=n,this.emailError="",this.newPass=new G({currentPassword:new v(null,[g.required]),password:new v(null,[g.required,g.minLength(6)]),rePassword:new v(null,[g.required])})}changePass(){this.newPass.invalid||localStorage.getItem("userToken")&&this._UserService.updateLoggedUserPass(this.newPass.value).subscribe({next:n=>{n.message==="success"&&(n.data&&n.data.token&&localStorage.setItem("userToken",n.data.token),this.newPass.reset())},error:n=>{this.emailError=n.error.errors.msg}})}static{this.\u0275fac=function(i){return new(i||e)(C(A))}}static{this.\u0275cmp=u({type:e,selectors:[["app-change-pass"]],decls:25,vars:17,consts:[[1,"py-3","py-md-5","my-5","my-md-5"],[1,"change-pass","box-shadow","p-3","mx-auto","my-4"],[1,"text-center","font-bold","font-lg","mb-4"],["class","text-danger text-center font-lg font-bold my-4",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","currentPass"],["formControlName","currentPassword","type","password","id","currentPass",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","newPass"],["formControlName","password","type","password","id","newPass",1,"form-control",3,"ngClass"],["for","confirmNewPass"],["formControlName","rePassword","type","password","id","confirmNewPass",1,"form-control",3,"ngClass"],["type","submit",1,"update-btn","mt-3","w-100","cursor-pointer",3,"disabled"],[1,"text-danger","text-center","font-lg","font-bold","my-4"],[1,"invalid-feedback"]],template:function(i,t){if(i&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),a(3,"Password & Security"),r(),m(4,ve,2,1,"div",3),o(5,"form",4),f("ngSubmit",function(){return t.changePass()}),o(6,"div",5)(7,"label",6),a(8,"Current Password"),r(),d(9,"input",7),m(10,Pe,2,0,"div",8),r(),o(11,"div",5)(12,"label",9),a(13,"New Password"),r(),d(14,"input",10),m(15,Ce,2,0,"div",8)(16,_e,2,0,"div",8),r(),o(17,"div",5)(18,"label",11),a(19,"Confirm New Password"),r(),d(20,"input",12),m(21,be,2,0,"div",8)(22,we,2,0,"div",8),r(),o(23,"button",13),a(24,"Update"),r()()()()),i&2){let p,_,P,E,N,k,F,b;s(4),l("ngIf",t.emailError),s(),l("formGroup",t.newPass),s(4),l("ngClass",j(11,B,((p=t.newPass.get("currentPassword"))==null?null:p.touched)&&((p=t.newPass.get("currentPassword"))==null?null:p.invalid))),s(),l("ngIf",((_=t.newPass.get("currentPassword"))==null?null:_.touched)&&((_=t.newPass.get("currentPassword"))==null?null:_.invalid)),s(4),l("ngClass",j(13,B,((P=t.newPass.get("password"))==null?null:P.touched)&&((P=t.newPass.get("password"))==null?null:P.invalid))),s(),l("ngIf",((E=t.newPass.get("password"))==null?null:E.touched)&&((E=t.newPass.get("password"))==null?null:E.hasError("required"))),s(),l("ngIf",((N=t.newPass.get("password"))==null?null:N.touched)&&((N=t.newPass.get("password"))==null?null:N.hasError("minlength"))),s(4),l("ngClass",j(15,B,((k=t.newPass.get("rePassword"))==null?null:k.touched)&&((k=t.newPass.get("rePassword"))==null?null:k.invalid))),s(),l("ngIf",((F=t.newPass.get("rePassword"))==null?null:F.touched)&&((F=t.newPass.get("rePassword"))==null?null:F.invalid)),s(),l("ngIf",((b=t.newPass.get("password"))==null?null:b.value)!==((b=t.newPass.get("rePassword"))==null?null:b.value)&&((b=t.newPass.get("rePassword"))==null?null:b.touched)),s(),l("disabled",t.newPass.invalid)}},dependencies:[Q,w,M,x,y,S,O,D],styles:[".change-pass[_ngcontent-%COMP%]{border-radius:10px;width:90%;max-width:500px}.change-pass[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:20px;font-weight:700;display:block;margin-bottom:8px}.change-pass[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:16px}.change-pass[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]{border:none;border-radius:7px;background-color:var(--main-color);color:#fff;font-weight:800;padding:12px 20px;transition:all .3s;width:100%}.change-pass[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]:hover{background-color:#082f49}.change-pass[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@media (max-width: 768px){.change-pass[_ngcontent-%COMP%]{width:95%;padding:15px!important}.change-pass[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.change-pass[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;margin-top:15px}.change-pass[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:14px;padding:6px 10px}.change-pass[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]{padding:10px 16px;font-size:14px}}"]})}}return e})();function xe(e,c){e&1&&(o(0,"div",27)(1,"div",28)(2,"span",29),a(3,"Loading..."),r()()())}function ye(e,c){if(e&1&&(o(0,"div",30),a(1),r()),e&2){let n=h();s(),K("",n.emailError," ")}}var de=(()=>{class e{constructor(n,i,t){this._UserService=n,this.fb=i,this._AuthService=t,this.userId="",this.userProfileData=null,this.emailError="",this.profileImage="../../../../../assets/images/user-Csi4vjZh.png",this.isLoading=!1;let p=localStorage.getItem("profileImage");p&&(this.profileImage=p)}ngOnInit(){this.personalDetailsForm=this.fb.group({name:["",[g.required]],email:["",[g.required,g.email]],phone:["",[g.required]]}),this.decodedToken(),this.getProfileDataById(this.userId)}onFileSelected(n){let i=n.target.files[0];if(i){this.isLoading=!0;let t=new FileReader;t.onload=p=>{localStorage.setItem("profileImage",p.target.result),this.profileImage=p.target.result,this.isLoading=!1},t.readAsDataURL(i)}}getProfileDataById(n){this._UserService.getUserProfileDataById(n).subscribe({next:i=>{this.userProfileData=i.data},error:i=>{console.log(i)}})}updateUserProfile(){this.personalDetailsForm.valid&&this._UserService.updateUserProfile(this.personalDetailsForm.value).subscribe({next:n=>{console.log("data for updated",n),n.message==="success"&&(this.getProfileDataById(this.userId),this.clearInputs())},error:n=>{this.emailError=n.error.errors.msg}})}clearInputs(){this.personalDetailsForm.reset(),this.emailError=""}decodedToken(){let n=this._AuthService.decodeUserData();n?n.id?this.userId=n.id:console.error("ID is missing in the decoded token"):console.error("Failed to decode user token")}static{this.\u0275fac=function(i){return new(i||e)(C(A),C(te),C(oe))}}static{this.\u0275cmp=u({type:e,selectors:[["app-personal-details"]],decls:33,vars:7,consts:[["fileInput",""],[1,"personal-detail","py-5","my-5"],[1,"container"],[1,"row","g-0","p-5"],[1,"col-12","col-md-6"],[1,"image-profile","d-flex","flex-column","align-items-center"],[1,"img","d-flex","justify-content-center","position-relative"],["alt","user",1,"img-width",3,"src"],["class","loading-overlay",4,"ngIf"],[1,"btn-upload"],["type","file","accept","image/*",2,"display","none",3,"change"],[3,"click"],[1,"col-12","col-md-4"],[1,"personal-info","box-shadow","p-3","second-color"],[1,"text-center","font-bold","font-lg"],["class","text-danger text-center font-lg font-bold my-4",4,"ngIf"],[3,"ngSubmit","formGroup"],["for","name"],["type","text","disabled","",1,"form-control","my-2",3,"value"],["formControlName","name","type","text","id","name","placeholder","Enter your new name",1,"form-control"],["for","email"],["type","email","disabled","",1,"form-control","my-2",3,"value"],["formControlName","email","type","email","id","email","placeholder","Enter your new email",1,"form-control"],["for","phone"],["type","tel","disabled","",1,"form-control","my-2",3,"value"],["formControlName","phone","type","tel","id","phone","placeholder","Enter your new phone",1,"form-control"],[1,"update-btn","mt-3"],[1,"loading-overlay"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"text-danger","text-center","font-lg","font-bold","my-4"]],template:function(i,t){if(i&1){let p=Z();o(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),d(6,"img",7),m(7,xe,4,0,"div",8),r(),o(8,"div",9)(9,"input",10,0),f("change",function(P){return V(p),L(t.onFileSelected(P))}),r(),o(11,"button",11),f("click",function(){V(p);let P=H(10);return L(P.click())}),a(12,"Upload Photo"),r()()()(),o(13,"div",12)(14,"div",13)(15,"h2",14),a(16,"Personal Details"),r(),m(17,ye,2,1,"div",15),o(18,"form",16),f("ngSubmit",function(){return V(p),L(t.updateUserProfile())}),o(19,"label",17),a(20,"Name"),r(),d(21,"input",18)(22,"input",19),o(23,"label",20),a(24,"Email"),r(),d(25,"input",21)(26,"input",22),o(27,"label",23),a(28,"Phone"),r(),d(29,"input",24)(30,"input",25),o(31,"button",26),a(32,"Update"),r()()()()()()()}i&2&&(s(6),l("src",t.profileImage,Y),s(),l("ngIf",t.isLoading),s(10),l("ngIf",t.emailError),s(),l("formGroup",t.personalDetailsForm),s(3),l("value",t.userProfileData==null?null:t.userProfileData.name),s(4),l("value",t.userProfileData==null?null:t.userProfileData.email),s(4),l("value",t.userProfileData==null?null:t.userProfileData.phone))},dependencies:[w,M,x,y,S,O,D],styles:[".personal-detail[_ngcontent-%COMP%]   .img-width[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;object-fit:cover}@media (max-width: 768px){.personal-detail[_ngcontent-%COMP%]   .img-width[_ngcontent-%COMP%]{width:150px;height:150px}.personal-detail[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0}.personal-detail[_ngcontent-%COMP%]   .col-md-6[_ngcontent-%COMP%], .personal-detail[_ngcontent-%COMP%]   .col-md-4[_ngcontent-%COMP%]{padding:15px}.personal-detail[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0}.personal-detail[_ngcontent-%COMP%]   .p-5[_ngcontent-%COMP%]{padding:1rem!important}}.personal-detail[_ngcontent-%COMP%]   .btn-upload[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px;border:1px solid var(--main-color);border-radius:10px;background-color:#fff;color:var(--main-color);padding:8px 16px;transition:all .5s}.personal-detail[_ngcontent-%COMP%]   .btn-upload[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--main-color);color:#fff}.personal-detail[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]{border-radius:20px}.personal-detail[_ngcontent-%COMP%]   .personal-info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:20px;font-weight:700}.personal-detail[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]{border:none;border-radius:7px;background-color:var(--main-color);color:#fff;font-weight:800;padding:7px 14px;transition:all .3s;width:100%}.personal-detail[_ngcontent-%COMP%]   .update-btn[_ngcontent-%COMP%]:hover{background-color:#082f49}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;background-color:#ffffffb3;border-radius:50%}"]})}}return e})();var pe=(()=>{class e{constructor(){this.isSidebarVisible=!1}toggleSidebar(){this.isSidebarVisible=!this.isSidebarVisible}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=u({type:e,selectors:[["app-sidebar-profile"]],decls:13,vars:10,consts:[["id","offcanvasSidebar"],[1,"p-3"],["routerLink","personal-details","routerLinkActive","affcanvas-active",1,"my-2","cursor-pointer"],[1,"fa-solid","fa-user-pen","me-2"],["routerLink","change-pass","routerLinkActive","affcanvas-active",1,"my-2","cursor-pointer"],[1,"fa-solid","fa-lock","me-2"],["routerLink","add-address","routerLinkActive","affcanvas-active",1,"my-2","cursor-pointer"],[1,"fa-solid","fa-address-card","me-2"],[1,"arrow-btn","d-flex","justify-content-center","align-items-center","cursor-pointer",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"h3",2),d(3,"i",3),a(4,"Personal Details"),r(),o(5,"h3",4),d(6,"i",5),a(7,"Change Password"),r(),o(8,"h3",6),d(9,"i",7),a(10,"Add Address"),r()(),o(11,"div",8),f("click",function(){return t.toggleSidebar()}),d(12,"i"),r()()),i&2&&(q("show",t.isSidebarVisible),s(12),q("fa-solid",!0)("font-lg",!0)("fa-chevron-right",!t.isSidebarVisible)("fa-chevron-left",t.isSidebarVisible))},dependencies:[$,ee],styles:["#offcanvasSidebar[_ngcontent-%COMP%]{width:220px;height:300px!important;position:fixed;top:100px;left:0;height:100%;background-color:#fff;transform:translate(-100%);transition:all .7s;box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;border-radius:0 10px 10px 0;border:1px solid #e5e7eb;z-index:1000}@media (max-width: 768px){#offcanvasSidebar[_ngcontent-%COMP%]{width:210px;top:70px}#offcanvasSidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.arrow-btn[_ngcontent-%COMP%]{padding:15px;right:-30px}}#offcanvasSidebar.show[_ngcontent-%COMP%]{transform:translate(0)}#offcanvasSidebar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:17px;font-weight:400}.affcanvas-active[_ngcontent-%COMP%]{color:var(--main-color)!important;font-weight:900!important}.arrow-btn[_ngcontent-%COMP%]{width:30px;height:30px;padding:20px;position:absolute;top:20%;right:-40px;transform:translateY(-50%);background-color:#fff;border:none;border-right:1px solid #e5e7eb;border-top:1px solid #e5e7eb;border-bottom:1px solid #e5e7eb;border-radius:0 50% 50% 0;color:var(--main-color)}.fa-chevron-rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}"]})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=u({type:e,selectors:[["app-profile-setting"]],decls:3,vars:0,consts:[[1,"position-relative"]],template:function(i,t){i&1&&(o(0,"div",0),d(1,"router-outlet")(2,"app-sidebar-profile"),r())},dependencies:[X,pe]})}}return e})();var Oe=[{path:"",redirectTo:"profile-setting",pathMatch:"full"},{path:"profile-setting",component:me,children:[{path:"",redirectTo:"personal-details",pathMatch:"full"},{path:"personal-details",component:de,title:"Personal Details"},{path:"change-pass",component:le,title:"Change Password"},{path:"add-address",component:se,title:"Add Address"},{path:"**",component:R,title:"Error 404"}]},{path:"**",component:R,title:"Error 404"}],ce=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=U({type:e})}static{this.\u0275inj=T({imports:[z.forChild(Oe),z]})}}return e})();var nt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=U({type:e})}static{this.\u0275inj=T({imports:[W,ce,ne]})}}return e})();export{nt as ProfileModule};
